<!DOCTYPE html>
<html>

<head>
  <base target="_top">
</head>

<body>

  <label for="exp-type">Tipo di spesa</label>
  <select id="exp-type">
    <option value="1">Spesa Alimentare</option>
    <option value="2">Altro</option>
    <option value="3">Extra Danny</option>
    <option value="4">Extra Erica</option>
  </select>

  <label for="exp-date">Data</label>
  <input id="exp-date" type="date">

  <label for="exp-amount">Cifra</label>
  <input id="exp-amount" type="number">

  <button id="submit-button">Invia</button>


  <script>
    let submit = document.querySelector('#submit-button');

    function sendExp() {
      let expType = document.querySelector('#exp-type').value;
      let expDate = document.querySelector('#exp-date').value;
      let expAmount = document.querySelector('#exp-amount').value;
      
      console.log('click')
      fetch('https://script.google.com/macros/s/AKfycbzZeobc6dVyO-qpFjvdb8uXxGCdNmjPwtPlfIvQuUxozq91hI3-F-lFQ9XU3kAvwS_K/exec', {
        method: 'POST',
        mode: 'no-cors',
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({
          type: expType,
          date: expDate,
          amount: expAmount
        })
      }).then(function(response) {
        // The API call was successful!
        if (response.ok) {
          return response.json();
        } else {
          return Promise.reject(response);
        }
      }).then(function(data) {
        // This is the JSON from our response
        console.log(data);
      }).catch(function(err) {
        // There was an error
        console.warn('Something went wrong.', err);
      });
    }

    submit.addEventListener("click", sendExp);
  </script>
</body>

</html>
