<!DOCTYPE html>
<html>

<head>
  <base target="_top">
</head>

<body>

  <label for="exp-type">Tipo di spesa</label>
  <select id="exp-type">
    <option value="1">Spesa Alimentare</option>
    <option value="2">Altro</option>
    <option value="3">Extra Danny</option>
    <option value="4">Extra Erica</option>
  </select>

  <label for="exp-date">Data</label>
  <input id="exp-date" type="date">

  <label for="exp-amount">Cifra</label>
  <input id="exp-amount" type="number">

  <button id="submit-button">Invia</button>
  <span id="status"></span>


  <script>
    let submit = document.querySelector('#submit-button');
    let status = document.querySelector('#status');

    function sendExp() {
      let expType = document.querySelector('#exp-type').value;
      let expDate = document.querySelector('#exp-date').value;
      let expAmount = document.querySelector('#exp-amount').value;

      console.log('click')
      fetch('https://script.google.com/macros/s/AKfycbx5d7Exs46LichBhn4eqWM-ogAcrfpvj3GDXXQIGcMrflPVLumOXqw3dLxsZ1tp_SgM/exec', {
        method: 'POST',
        mode: 'no-cors',
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({
          type: expType,
          date: expDate,
          amount: expAmount
        })
      }).then(function (response) {
         status.innerHTML = "Salvato."
      }).catch(function (e) {
        stats.innerHTML = "Errore, aprire console per i dettagli."
        console.error(e);
      })
    }

    submit.addEventListener("click", sendExp);
  </script>
</body>

</html>
